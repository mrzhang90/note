--.查找addEventListener绑定事件队列
    /**
     * @fileoverview 查找addEventListener绑定事件队列
     * @author yuanzhijia@yidengxuetang.com
     * @date 2017/10/15
     */
    ((w)=>{
        w.listenerList = new Set();
        const _cache = w.addEventListener;
        const handler = {
            apply: (target, thisBinding, args) =>{
                //target();
                listenerList.add(args[0]);
                Reflect.apply(_cache,w,args);
                //需要返回参数可打开
                //return args[0];
            }
        };
        w.addEventListener = new Proxy((event,fn)=>{
            console.log(222);
            // Reflect.apply(_cache,w,arguments);
        }, handler);
    })(window);

    //📒具体业务无需Care
    window.addEventListener('resize',function(){console.log(1111);});
    window.addEventListener('a',function(){});
    for(const val of listenerList){
    //✏️打印所有addEventListener事件队列
        console.log(val);
    }
--.标准浏览器使用jquery高版本，IE低版本浏览器使用jquery低版本
    方案1.所有IE版本使用jquery低版本
        <!--[if IE]> 
        <script src="http://cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
        <![endif]-->
        <!--[if !IE]><!--> 
        <script src="http://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
        <!--<![endif]--> 
    方案2.使用js判断是IE低版本则使用jquery低版本
        <script type="text/javascript">
            var userAgent = navigator.userAgent.toLowerCase();
            var obj = {
                version: (userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/) || [])[1],
                msie: (/msie/.test(userAgent)||/rv:/.test(userAgent)) && !/opera/.test(userAgent)
            };
            if(!obj.msie || (obj.msie && parseInt(obj.version)>8)){
                document.write('<script src="http://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"><\/script>');
            }
            if(obj.msie && parseInt(obj.version)<=8){
                document.write('<script src="http://cdn.bootcss.com/jquery/1.9.1/jquery.min.js"><\/script>');
            }
        </script>
    方案三.（参考自网络）
        <script type="text/javascript" src="static/js/jquery-1.7.2.js"></script>
        <script type="text/javascript">window.jQuery || document.write("<script src='static/js/jquery-1.9.1.min.js'>\x3C/script>");</script>

--.window.screenX判断浏览器的,678是undefined，91011是number,chrome浏览器也是true 
  if (typeof window.screenX === "number") {
        
  } else {
    alert("您现在使用的浏览器内力不足，为防止走火入魔，建议使用IE9+或Chrome 20+浏览器~~");    
  }
--.判断手机设备是不是iphone，获取iphone版本号
  var p = String(navigator.platform);
  if( p === 'iPad' || p === 'iPhone' || p === 'iPod touch' ){
    var v = (navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);
    if (parseInt(v[1], 10)>=7) {// iOS >=7
    }
  }
  //验证是不是手机
  function isPhone(){
    var mobileAgent = new Array("iphone", "ipod", "ipad", "android", "mobile", "blackberry", "webos", "incognito", "webmate", "bada", "nokia", "lg", "ucweb", "skyfire");
    var browser = navigator.userAgent.toLowerCase(); 
    var isMobile = false; 
    for (var i=0; i<mobileAgent.length; i++){
        if(browser.indexOf(mobileAgent[i])!=-1){
            isMobile = true; 
            alert(mobileAgent[i]);
            // location.href = '手机网址';
            break;
        }
    }
    return isMobile;
  }
--.Ajax请求默认的都是异步的，如果想同步 async设置为false,然后
    var html = $.ajax({
      url: "some.php",
      async: false
    }).responseText; 

    或者在全局设置Ajax属性
    $.ajaxSetup({
      async: false
      });
    再用post，get就是同步的了
--.传递多组参数(data传递利用上面的file_post方法):
    var data=new FormData();//传递多组数组给后端，后端要支持接受字符串数组
    $('input['type=checkbox']').each(function(){
        data.append('campusId',$(this).attr('data-campusId'))
        data.append('detailId',$(this).attr('data-detailId'))
    })
--.调用cookie:来源-https://my.oschina.net/crazymus/blog/425650
    //设置cookie，有效期为365天
    setCookie('username','123',365);
    //取回，若cookie失效，将返回空
    getCookie('username');
    //设置cookie
    function setCookie(c_name,value,expiredays)
    {
        var exdate=new Date()
        exdate.setDate(exdate.getDate()+expiredays)
        document.cookie=c_name+ "=" +escape(value)+
        ((expiredays==null) ? "" : ";expires="+exdate.toGMTString())
    }
 
    //取回cookie
    function getCookie(c_name)
    {
        if (document.cookie.length>0)
        {
            c_start=document.cookie.indexOf(c_name + "=")
        if (c_start!=-1)
        { 
            c_start=c_start + c_name.length+1 
            c_end=document.cookie.indexOf(";",c_start)
            if (c_end==-1) c_end=document.cookie.length
            return unescape(document.cookie.substring(c_start,c_end))
            } 
        }
        return ""
    }    
--.加载XML
    loadXML = function(xmlString){
            var xmlDoc=null;
            //判断浏览器的类型
            //支持IE浏览器 
            if(!window.DOMParser && window.ActiveXObject){   //window.DOMParser 判断是否是非ie浏览器
                var xmlDomVersions = ['MSXML.2.DOMDocument.6.0','MSXML.2.DOMDocument.3.0','Microsoft.XMLDOM'];
                for(var i=0;i<xmlDomVersions.length;i++){
                    try{
                        xmlDoc = new ActiveXObject(xmlDomVersions[i]);
                        xmlDoc.async = false;
                        xmlDoc.loadXML(xmlString); //loadXML方法载入xml字符串
                        break;
                    }catch(e){
                    }
                }
            }
            //支持Mozilla浏览器
            else if(window.DOMParser && document.implementation && document.implementation.createDocument){
                try{
                    /* DOMParser 对象解析 XML 文本并返回一个 XML Document 对象。
                     * 要使用 DOMParser，使用不带参数的构造函数来实例化它，然后调用其 parseFromString() 方法
                     * parseFromString(text, contentType) 参数text:要解析的 XML 标记 参数contentType文本的内容类型
                     * 可能是 "text/xml" 、"application/xml" 或 "application/xhtml+xml" 中的一个。注意，不支持 "text/html"。
                     */
                    domParser = new  DOMParser();
                    xmlDoc = domParser.parseFromString(xmlString, 'text/xml');
                }catch(e){
                }
            }
            else{
                return null;
            }

            return xmlDoc;
    }
--.判断数组中是否存在值
    intNum.contains(arr)
    Array.prototype.contains = function ( needle ) {
      for (i in this) {
        if (this[i] == needle) return true;
      }
      return false;
    }
--.PC页面自适应手机-思路是给body加一个固定的可以把内容完全展示的宽度，这样利用浏览器有等比例缩放页面的特性
    var width='1300';
    if($(document.body).width()<1180){
        $('body').css("width",width);
        // $(".phoneWidth").css("width",width);
    }
--.HTML5 实现手机拍照上传
    //引用：https://my.oschina.net/zyxchuxin/blog/700381
    //上传图片有原生的方法<input type="file" accept="image/*">，如果只想要拍照上传，不希望用户选择图片上传，可以通过添加capture属性，该属性值有camcorder/microphone/camera...，此处选择camera。PS：该属性存在浏览器兼容性问题，不是所有的浏览器都支持。
    HTML:<input type="file" accept="image/*" capture="camera" >
    调用：
    if(typeof FileReader == 'undefined'){
        $('#xdaTanFileImg').setAttribute("disabled","disabled");  
    }
    $('#xdaTanFileImg').on('change',function(){
        var reader = new FileReader();
        reader.readAsDataURL(this.files[0]);
        reader.onload = function (e) {
            //调用图片压缩方法：compress();
            var fileSize = (this.files[0].size/1024/1024).toFixed(2);
            // console.log(this.files[0]);
            // console.log(this.files[0].size);
            // console.log(fileSize);
            // console.log(this.result)
            compress(this.result,fileSize,function(dataUrl){
                var data = new FormData();
                data.append('uploadFile', dataUrl);
                file_post('/img/userphoto/uploadImg.do',data,'',function(data){
                  data=JSON.parse(data);
                  data=JSON.parse(data);
                  imgUrl=data.url;
                  saveImage(imgUrl,function(){
                    // $('#photoUrl').attr('src',imgUrl)
                    // $('#photoUrl').css('background-image','url("'+imgUrl+'")')
                    imgCenter($('#photoUrl'),dataUrl)
                  })
                });
            })
        };
    })
    封装：function compress(res,fileSize,callback) { //res代表上传的图片，fileSize大小图片的大小
        var img = new Image(),
            maxW = 640; //设置最大宽度

        img.onload = function () {
            //对上传的图片进行压缩，需要借助于canvas API
            var cvs = document.createElement( 'canvas'),
                ctx = cvs.getContext( '2d');
            //设置压缩后的最大宽度 or 高度
            if(img.width > maxW) {
                img.height *= maxW / img.width;
                img.width = maxW;
            }

            cvs.width = img.width;
            cvs.height = img.height;

            ctx.clearRect(0, 0, cvs.width, cvs.height);
            ctx.drawImage(img, 0, 0, img.width, img.height);

            var compressRate = getCompressRate(1,fileSize);

            var dataUrl = cvs.toDataURL( 'image/jpeg', compressRate);//将图片按照一定的压缩比进行压缩，得到base64编码

            // document.body.appendChild(cvs);
            // console.log(dataUrl);
            callback && callback(dataUrl);
        }

        img.src = res;
    }
    //设置压缩比例，根据图片的不同size大小，设置不同的压缩比。
    function getCompressRate(allowMaxSize,fileSize){ //计算压缩比率，size单位为MB
          var compressRate = 1;
          if(fileSize/allowMaxSize > 4){
               compressRate = 0.5;
          } else if(fileSize/allowMaxSize >3){
               compressRate = 0.6;
          } else if(fileSize/allowMaxSize >2){
               compressRate = 0.7;
          } else if(fileSize > allowMaxSize){
               compressRate = 0.8;
          } else{
               compressRate = 0.9;
          }

          alert(fileSize/allowMaxSize,compressRate)
          return compressRate;
    }
--.预加载
    //img.onload=img.onerror：是为了解决图片加载失败时，可以继续执行脚本
    function progressBar(){
        var element='<div id="overlay-bar"><div id="progress"></div><div class="loadLogo"><img src="img/logo.png"/></div><div id="progressNum">0%</div></div>';
        $(document.body).append(element);
        var num=0,arr=$('img');
        arr.each(function(){
            var img=new Image();
            img.onload=img.onerror=function(){
                try{
                    num++;
                    var scale=Math.floor((num/arr.length)*100);
                    $('#progress').width(scale+'%');
                    $('#progressNum').text(scale+'%')
                    if(scale==100){
                        $('#overlay-bar').animate({'opacity':0},{ duration: 300, queue: false, complete: function() {
                            $(this).hide();
                            $('#other-wrap').fadeIn();
                        }
                        });
                    }
                }catch(e){
                    console.log(e);
                }
            }
            img.src='http://shenbo.igalaxy.com.cn/'+$(this).attr('src');
        })
    }
    //img对象小例子-设置索引属性、读取属性
    li.each(function(){
        var index=$(this).index();//遍历li索引并赋给img对象上
        var imgElement=$(this).children('img');
        var img=new Image();
        img.onload=function(){
            img.onload=null;//解决gif图多次出发onload的问题
            var index=this.getAttribute('data-index');
            var currentLi=li.eq(index);
            var currentImg=currentLi.children('img');
            currentLi.css({'left':'50%','margin-left':-(currentImg.width()/2),'top':'50%','margin-top':-(currentImg.height()/2)})
        };
        img.setAttribute('data-index',index);//放到img.src是为了兼容IE低版本
        img.src=imgElement.attr('src');//放到这里是为了兼容ie低版本
    })