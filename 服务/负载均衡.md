weight访问权重，数值越大，平均访问次数越多
#### HTTP Upstream模块
Upstream是nginx服务器一个重要的模块，实现轮询和客户端ip之间实现后端的负载均衡
1. ip_hash指令
 保证用户访问的服务器，不会变（负载均衡时，nginx根据服务器压力分配用户访问的服务器）
1. server指令
  weight访问权重，默认1:1
1. upstream指令
  upstrean指令主要用于设置一组可以在proxy_pass和fastcgi_pass指令中使用额外代理服务器，默认负载均衡方式为轮询。

#### nginx实现负载均衡
```
worker_processes 4;  //电脑是几核，就设置多少
events{
  worker_connections 1024; //并发连接
}
#error_ log logs/error.log;        //出错的日志
#error_ log logs/error.log notice; //警告
#error_ log logs/error.log info;   //基本信息
http{
  upstream firsttest {
    ip_hash;
    server 192.168.0.21 weight=2;  //访问权重
    server 192.168.0.31;
  }
  server {
    listen 8080;
    location / {
      proxy_pass http://firsttest;
    }
  }
}
```

#### 部署NodeJS上线步骤
1. https://brew.sh/index_zh-cn.html
1. brew search nginx brew install nginx
1. brew info nginx
1. nginx -v
1. 启动sudo brew services start nginx（默认端口8080）
  备注：如果安装jenkins这里会失败
  sudo launchctl unload /Library/LaunchDaemons/org.jenkins-ci.plist
  systemctl start jenkins
1. 关闭sudo brew services stop nginx/nginx
1. nginx重启、停止
  nginx -s reload
  nginx -s stop
1. 打开nginx具体安装目录，查看配置文件/usr/local/nginx
1. 验证配置文件 nginx -t -c 自己的配置文件地址
1. 拷贝配置文件至Node项目目录 重新修改
1. 服务器端的nginx地址