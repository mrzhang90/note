--.æŸ¥æ‰¾addEventListenerç»‘å®šäº‹ä»¶é˜Ÿåˆ—
    /**
     * @fileoverview æŸ¥æ‰¾addEventListenerç»‘å®šäº‹ä»¶é˜Ÿåˆ—
     * @author yuanzhijia@yidengxuetang.com
     * @date 2017/10/15
     */
    ((w)=>{
        w.listenerList = new Set();
        const _cache = w.addEventListener;
        const handler = {
            apply: (target, thisBinding, args) =>{
                //target();
                listenerList.add(args[0]);
                Reflect.apply(_cache,w,args);
                //éœ€è¦è¿”å›å‚æ•°å¯æ‰“å¼€
                //return args[0];
            }
        };
        w.addEventListener = new Proxy((event,fn)=>{
            console.log(222);
            // Reflect.apply(_cache,w,arguments);
        }, handler);
    })(window);

    //ğŸ“’å…·ä½“ä¸šåŠ¡æ— éœ€Care
    window.addEventListener('resize',function(){console.log(1111);});
    window.addEventListener('a',function(){});
    for(const val of listenerList){
    //âœï¸æ‰“å°æ‰€æœ‰addEventListeneräº‹ä»¶é˜Ÿåˆ—
        console.log(val);
    }
--.æ ‡å‡†æµè§ˆå™¨ä½¿ç”¨jqueryé«˜ç‰ˆæœ¬ï¼ŒIEä½ç‰ˆæœ¬æµè§ˆå™¨ä½¿ç”¨jqueryä½ç‰ˆæœ¬
    æ–¹æ¡ˆ1.æ‰€æœ‰IEç‰ˆæœ¬ä½¿ç”¨jqueryä½ç‰ˆæœ¬
        <!--[if IE]> 
        <script src="http://cdn.bootcss.com/jquery/1.9.1/jquery.min.js"></script>
        <![endif]-->
        <!--[if !IE]><!--> 
        <script src="http://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
        <!--<![endif]--> 
    æ–¹æ¡ˆ2.ä½¿ç”¨jsåˆ¤æ–­æ˜¯IEä½ç‰ˆæœ¬åˆ™ä½¿ç”¨jqueryä½ç‰ˆæœ¬
        <script type="text/javascript">
            var userAgent = navigator.userAgent.toLowerCase();
            var obj = {
                version: (userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/) || [])[1],
                msie: (/msie/.test(userAgent)||/rv:/.test(userAgent)) && !/opera/.test(userAgent)
            };
            if(!obj.msie || (obj.msie && parseInt(obj.version)>8)){
                document.write('<script src="http://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"><\/script>');
            }
            if(obj.msie && parseInt(obj.version)<=8){
                document.write('<script src="http://cdn.bootcss.com/jquery/1.9.1/jquery.min.js"><\/script>');
            }
        </script>
    æ–¹æ¡ˆä¸‰.ï¼ˆå‚è€ƒè‡ªç½‘ç»œï¼‰
        <script type="text/javascript" src="static/js/jquery-1.7.2.js"></script>
        <script type="text/javascript">window.jQuery || document.write("<script src='static/js/jquery-1.9.1.min.js'>\x3C/script>");</script>

--.window.screenXåˆ¤æ–­æµè§ˆå™¨çš„,678æ˜¯undefinedï¼Œ91011æ˜¯number,chromeæµè§ˆå™¨ä¹Ÿæ˜¯true 
  if (typeof window.screenX === "number") {
        
  } else {
    alert("æ‚¨ç°åœ¨ä½¿ç”¨çš„æµè§ˆå™¨å†…åŠ›ä¸è¶³ï¼Œä¸ºé˜²æ­¢èµ°ç«å…¥é­”ï¼Œå»ºè®®ä½¿ç”¨IE9+æˆ–Chrome 20+æµè§ˆå™¨~~");    
  }
--.åˆ¤æ–­æ‰‹æœºè®¾å¤‡æ˜¯ä¸æ˜¯iphoneï¼Œè·å–iphoneç‰ˆæœ¬å·
  var p = String(navigator.platform);
  if( p === 'iPad' || p === 'iPhone' || p === 'iPod touch' ){
    var v = (navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);
    if (parseInt(v[1], 10)>=7) {// iOS >=7
    }
  }
  //éªŒè¯æ˜¯ä¸æ˜¯æ‰‹æœº
  function isPhone(){
    var mobileAgent = new Array("iphone", "ipod", "ipad", "android", "mobile", "blackberry", "webos", "incognito", "webmate", "bada", "nokia", "lg", "ucweb", "skyfire");
    var browser = navigator.userAgent.toLowerCase(); 
    var isMobile = false; 
    for (var i=0; i<mobileAgent.length; i++){
        if(browser.indexOf(mobileAgent[i])!=-1){
            isMobile = true; 
            alert(mobileAgent[i]);
            // location.href = 'æ‰‹æœºç½‘å€';
            break;
        }
    }
    return isMobile;
  }
--.Ajaxè¯·æ±‚é»˜è®¤çš„éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œå¦‚æœæƒ³åŒæ­¥ asyncè®¾ç½®ä¸ºfalse,ç„¶å
    var html = $.ajax({
      url: "some.php",
      async: false
    }).responseText; 

    æˆ–è€…åœ¨å…¨å±€è®¾ç½®Ajaxå±æ€§
    $.ajaxSetup({
      async: false
      });
    å†ç”¨postï¼Œgetå°±æ˜¯åŒæ­¥çš„äº†
--.ä¼ é€’å¤šç»„å‚æ•°(dataä¼ é€’åˆ©ç”¨ä¸Šé¢çš„file_postæ–¹æ³•):
    var data=new FormData();//ä¼ é€’å¤šç»„æ•°ç»„ç»™åç«¯ï¼Œåç«¯è¦æ”¯æŒæ¥å—å­—ç¬¦ä¸²æ•°ç»„
    $('input['type=checkbox']').each(function(){
        data.append('campusId',$(this).attr('data-campusId'))
        data.append('detailId',$(this).attr('data-detailId'))
    })
--.è°ƒç”¨cookie:æ¥æº-https://my.oschina.net/crazymus/blog/425650
    //è®¾ç½®cookieï¼Œæœ‰æ•ˆæœŸä¸º365å¤©
    setCookie('username','123',365);
    //å–å›ï¼Œè‹¥cookieå¤±æ•ˆï¼Œå°†è¿”å›ç©º
    getCookie('username');
    //è®¾ç½®cookie
    function setCookie(c_name,value,expiredays)
    {
        var exdate=new Date()
        exdate.setDate(exdate.getDate()+expiredays)
        document.cookie=c_name+ "=" +escape(value)+
        ((expiredays==null) ? "" : ";expires="+exdate.toGMTString())
    }
 
    //å–å›cookie
    function getCookie(c_name)
    {
        if (document.cookie.length>0)
        {
            c_start=document.cookie.indexOf(c_name + "=")
        if (c_start!=-1)
        { 
            c_start=c_start + c_name.length+1 
            c_end=document.cookie.indexOf(";",c_start)
            if (c_end==-1) c_end=document.cookie.length
            return unescape(document.cookie.substring(c_start,c_end))
            } 
        }
        return ""
    }    
--.åŠ è½½XML
    loadXML = function(xmlString){
            var xmlDoc=null;
            //åˆ¤æ–­æµè§ˆå™¨çš„ç±»å‹
            //æ”¯æŒIEæµè§ˆå™¨ 
            if(!window.DOMParser && window.ActiveXObject){   //window.DOMParser åˆ¤æ–­æ˜¯å¦æ˜¯éieæµè§ˆå™¨
                var xmlDomVersions = ['MSXML.2.DOMDocument.6.0','MSXML.2.DOMDocument.3.0','Microsoft.XMLDOM'];
                for(var i=0;i<xmlDomVersions.length;i++){
                    try{
                        xmlDoc = new ActiveXObject(xmlDomVersions[i]);
                        xmlDoc.async = false;
                        xmlDoc.loadXML(xmlString); //loadXMLæ–¹æ³•è½½å…¥xmlå­—ç¬¦ä¸²
                        break;
                    }catch(e){
                    }
                }
            }
            //æ”¯æŒMozillaæµè§ˆå™¨
            else if(window.DOMParser && document.implementation && document.implementation.createDocument){
                try{
                    /* DOMParser å¯¹è±¡è§£æ XML æ–‡æœ¬å¹¶è¿”å›ä¸€ä¸ª XML Document å¯¹è±¡ã€‚
                     * è¦ä½¿ç”¨ DOMParserï¼Œä½¿ç”¨ä¸å¸¦å‚æ•°çš„æ„é€ å‡½æ•°æ¥å®ä¾‹åŒ–å®ƒï¼Œç„¶åè°ƒç”¨å…¶ parseFromString() æ–¹æ³•
                     * parseFromString(text, contentType) å‚æ•°text:è¦è§£æçš„ XML æ ‡è®° å‚æ•°contentTypeæ–‡æœ¬çš„å†…å®¹ç±»å‹
                     * å¯èƒ½æ˜¯ "text/xml" ã€"application/xml" æˆ– "application/xhtml+xml" ä¸­çš„ä¸€ä¸ªã€‚æ³¨æ„ï¼Œä¸æ”¯æŒ "text/html"ã€‚
                     */
                    domParser = new  DOMParser();
                    xmlDoc = domParser.parseFromString(xmlString, 'text/xml');
                }catch(e){
                }
            }
            else{
                return null;
            }

            return xmlDoc;
    }
--.åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨å€¼
    intNum.contains(arr)
    Array.prototype.contains = function ( needle ) {
      for (i in this) {
        if (this[i] == needle) return true;
      }
      return false;
    }
--.PCé¡µé¢è‡ªé€‚åº”æ‰‹æœº-æ€è·¯æ˜¯ç»™bodyåŠ ä¸€ä¸ªå›ºå®šçš„å¯ä»¥æŠŠå†…å®¹å®Œå…¨å±•ç¤ºçš„å®½åº¦ï¼Œè¿™æ ·åˆ©ç”¨æµè§ˆå™¨æœ‰ç­‰æ¯”ä¾‹ç¼©æ”¾é¡µé¢çš„ç‰¹æ€§
    var width='1300';
    if($(document.body).width()<1180){
        $('body').css("width",width);
        // $(".phoneWidth").css("width",width);
    }
--.HTML5 å®ç°æ‰‹æœºæ‹ç…§ä¸Šä¼ 
    //å¼•ç”¨ï¼šhttps://my.oschina.net/zyxchuxin/blog/700381
    //ä¸Šä¼ å›¾ç‰‡æœ‰åŸç”Ÿçš„æ–¹æ³•<input type="file" accept="image/*">ï¼Œå¦‚æœåªæƒ³è¦æ‹ç…§ä¸Šä¼ ï¼Œä¸å¸Œæœ›ç”¨æˆ·é€‰æ‹©å›¾ç‰‡ä¸Šä¼ ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ captureå±æ€§ï¼Œè¯¥å±æ€§å€¼æœ‰camcorder/microphone/camera...ï¼Œæ­¤å¤„é€‰æ‹©cameraã€‚PSï¼šè¯¥å±æ€§å­˜åœ¨æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜ï¼Œä¸æ˜¯æ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒã€‚
    HTML:<input type="file" accept="image/*" capture="camera" >
    è°ƒç”¨ï¼š
    if(typeof FileReader == 'undefined'){
        $('#xdaTanFileImg').setAttribute("disabled","disabled");  
    }
    $('#xdaTanFileImg').on('change',function(){
        var reader = new FileReader();
        reader.readAsDataURL(this.files[0]);
        reader.onload = function (e) {
            //è°ƒç”¨å›¾ç‰‡å‹ç¼©æ–¹æ³•ï¼šcompress();
            var fileSize = (this.files[0].size/1024/1024).toFixed(2);
            // console.log(this.files[0]);
            // console.log(this.files[0].size);
            // console.log(fileSize);
            // console.log(this.result)
            compress(this.result,fileSize,function(dataUrl){
                var data = new FormData();
                data.append('uploadFile', dataUrl);
                file_post('/img/userphoto/uploadImg.do',data,'',function(data){
                  data=JSON.parse(data);
                  data=JSON.parse(data);
                  imgUrl=data.url;
                  saveImage(imgUrl,function(){
                    // $('#photoUrl').attr('src',imgUrl)
                    // $('#photoUrl').css('background-image','url("'+imgUrl+'")')
                    imgCenter($('#photoUrl'),dataUrl)
                  })
                });
            })
        };
    })
    å°è£…ï¼šfunction compress(res,fileSize,callback) { //resä»£è¡¨ä¸Šä¼ çš„å›¾ç‰‡ï¼ŒfileSizeå¤§å°å›¾ç‰‡çš„å¤§å°
        var img = new Image(),
            maxW = 640; //è®¾ç½®æœ€å¤§å®½åº¦

        img.onload = function () {
            //å¯¹ä¸Šä¼ çš„å›¾ç‰‡è¿›è¡Œå‹ç¼©ï¼Œéœ€è¦å€ŸåŠ©äºcanvas API
            var cvs = document.createElement( 'canvas'),
                ctx = cvs.getContext( '2d');
            //è®¾ç½®å‹ç¼©åçš„æœ€å¤§å®½åº¦ or é«˜åº¦
            if(img.width > maxW) {
                img.height *= maxW / img.width;
                img.width = maxW;
            }

            cvs.width = img.width;
            cvs.height = img.height;

            ctx.clearRect(0, 0, cvs.width, cvs.height);
            ctx.drawImage(img, 0, 0, img.width, img.height);

            var compressRate = getCompressRate(1,fileSize);

            var dataUrl = cvs.toDataURL( 'image/jpeg', compressRate);//å°†å›¾ç‰‡æŒ‰ç…§ä¸€å®šçš„å‹ç¼©æ¯”è¿›è¡Œå‹ç¼©ï¼Œå¾—åˆ°base64ç¼–ç 

            // document.body.appendChild(cvs);
            // console.log(dataUrl);
            callback && callback(dataUrl);
        }

        img.src = res;
    }
    //è®¾ç½®å‹ç¼©æ¯”ä¾‹ï¼Œæ ¹æ®å›¾ç‰‡çš„ä¸åŒsizeå¤§å°ï¼Œè®¾ç½®ä¸åŒçš„å‹ç¼©æ¯”ã€‚
    function getCompressRate(allowMaxSize,fileSize){ //è®¡ç®—å‹ç¼©æ¯”ç‡ï¼Œsizeå•ä½ä¸ºMB
          var compressRate = 1;
          if(fileSize/allowMaxSize > 4){
               compressRate = 0.5;
          } else if(fileSize/allowMaxSize >3){
               compressRate = 0.6;
          } else if(fileSize/allowMaxSize >2){
               compressRate = 0.7;
          } else if(fileSize > allowMaxSize){
               compressRate = 0.8;
          } else{
               compressRate = 0.9;
          }

          alert(fileSize/allowMaxSize,compressRate)
          return compressRate;
    }
--.é¢„åŠ è½½
    //img.onload=img.onerrorï¼šæ˜¯ä¸ºäº†è§£å†³å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶ï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œè„šæœ¬
    function progressBar(){
        var element='<div id="overlay-bar"><div id="progress"></div><div class="loadLogo"><img src="img/logo.png"/></div><div id="progressNum">0%</div></div>';
        $(document.body).append(element);
        var num=0,arr=$('img');
        arr.each(function(){
            var img=new Image();
            img.onload=img.onerror=function(){
                try{
                    num++;
                    var scale=Math.floor((num/arr.length)*100);
                    $('#progress').width(scale+'%');
                    $('#progressNum').text(scale+'%')
                    if(scale==100){
                        $('#overlay-bar').animate({'opacity':0},{ duration: 300, queue: false, complete: function() {
                            $(this).hide();
                            $('#other-wrap').fadeIn();
                        }
                        });
                    }
                }catch(e){
                    console.log(e);
                }
            }
            img.src='http://shenbo.igalaxy.com.cn/'+$(this).attr('src');
        })
    }
    //imgå¯¹è±¡å°ä¾‹å­-è®¾ç½®ç´¢å¼•å±æ€§ã€è¯»å–å±æ€§
    li.each(function(){
        var index=$(this).index();//éå†liç´¢å¼•å¹¶èµ‹ç»™imgå¯¹è±¡ä¸Š
        var imgElement=$(this).children('img');
        var img=new Image();
        img.onload=function(){
            img.onload=null;//è§£å†³gifå›¾å¤šæ¬¡å‡ºå‘onloadçš„é—®é¢˜
            var index=this.getAttribute('data-index');
            var currentLi=li.eq(index);
            var currentImg=currentLi.children('img');
            currentLi.css({'left':'50%','margin-left':-(currentImg.width()/2),'top':'50%','margin-top':-(currentImg.height()/2)})
        };
        img.setAttribute('data-index',index);//æ”¾åˆ°img.srcæ˜¯ä¸ºäº†å…¼å®¹IEä½ç‰ˆæœ¬
        img.src=imgElement.attr('src');//æ”¾åˆ°è¿™é‡Œæ˜¯ä¸ºäº†å…¼å®¹ieä½ç‰ˆæœ¬
    })