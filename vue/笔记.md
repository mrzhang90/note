vue是响应式的，当你在控制台通过app.data=XXX时，会自动调用set修改data属性值

##vant笔记
弹出提示，然后跳转页面
```js
    Dialog.alert({
        message: '弹出一段消息'
    }).then(() => {
        this.$router.push('address');
    });
```
##刷新当前页
``` js
router.push({
    //path:router.currentRoute.fullPath, // 获取当前连接，重新跳转
    path:route.fullPath, // 获取当前连接，重新跳转
    query:{
        _time:new Date().getTime()/1000 // 时间戳，刷新当前router
    }
})                    
    window.location.reload();
```

##锚点定位
```js
goTop(index){
    let anchor=this.$el.querySelector('#anchor'+index)
    if(document.documentElement.scrollTop>0){
        document.documentElement.scrollTop = anchor.offsetTop-100
    }else{
        document.body.scrollTop = anchor.offsetTop-100
    }
}
```
##动态生成海报活动图

html引入脚本
``` html
    <script src="../static/js/html2canvas.js"></script>
```
vue中直接调用，这里分两步
第一步.html2canvase把html布局转成canvas
第二步.把canvas转成img base64的海报图片
```js
    mounted() {
        //html布局转成canvas
        html2canvas(document.getElementById("to_canvas")).then((canvas)=>{
            this.showCanvas=true;
            // document.getElementById('canvas').appendChild(canvas);
            var ctx = canvas.getContext('2d');

            //canvas转base64图
            var dataImg = new Image()
            dataImg.src = canvas.toDataURL('image/png')
            document.getElementById('canvas').appendChild(dataImg) // 长按图片保存
        });
    }
```
参考：
[基于canvas生成图片](https://juejin.im/post/5aefc0456fb9a07abc29d36d)
### index.html里，head头部引入百度统计和CNZZ统计
```js
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?9ed24a2995eecc14db7875b2d85560d6";

      var cz = document.createElement("script");
      cz.src = "https://s22.cnzz.com/z_stat.php?id=1274676836&web_id=1274676836";

      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
      s.parentNode.insertBefore(cz, s);
    })();
```

### 单页面加统计代码
在vue-router的beforeEach里，加入统计代码
```js
router.beforeEach((to, from, next) => {
    if (to.path) {
      _hmt.push(['_trackPageview', '/#' + to.fullPath]);
      if (window._czc) {
        window._czc.push(['_trackPageview', to.fullPath])
      }
    }
    next();
});
```
参考：
[百度统计开发平台](https://tongji.baidu.com/open/api/more?p=ref_trackPageview)
[CNZZ开发平台](https://developer.umeng.com/docs/67963/detail/73619)
##scroll-滚动定位
    监听滚动，定位导航
1. 创建navigator.vue组件
    ```html
    <template>
    <div class="navigate_warp h130">
            <ul id="navigate" class="navigate h130 flex f30 cg3" :class="{fixedScroll:isfixedScroll}">
                <slot></slot>
            </ul>
        </div>
    </template>
    ```
    ```js
    <script>
    // import _debounce from 'lodash/debounce'
    import _throttle from 'lodash/throttle'
    export default {
        data(){
            return {
                // 存储scroll绑定的事件-页面卸载时需要
                scrollFn:null,
                // 存储导航元素
                navigateEle:null,
                // 导航是否固定定位
                isfixedScroll:false,
                position: {scrollTop: 0, scrollLeft: 0},
            }
        },
        mounted(){
            this.navigateEle=this.$el.querySelector('#navigate');
            this.position.scrollTop=this.navigateEle.offsetTop;
            // 存储scroll绑定的事件-页面卸载时需要
            this.scrollFn=_throttle(this.onScroll,300)
            // 节流-一定间隔时间内调用，使用鼠标滚动
            window.addEventListener('scroll',this.scrollFn)
        },
        methods:{
            // scroll事件绑定
            onScroll(e){
                if(this.position.scrollTop <= (document.documentElement.scrollTop || document.body.scrollTop)){
                    this.isfixedScroll=true;
                }else{
                    this.isfixedScroll=false;
                }
            },
            // 页面离开-卸载scroll-父组件通知
            unbind(){
                window.removeEventListener('scroll',this.scrollFn);
            },
        }
    }
    </script>
    ```
    ```css
    <style lang="less" scoped>
    // 这个元素是用来占位的，等.navigate类添加fixed定位后，这里占位还在，页面就不会晃动
    .navigate_warp{
        .navigate{
            background-color:#ffffff;
            &.fixedScroll{
                position: fixed;top:0;left:0;z-index:9;
            }
            li{
                position: relative;
                display: flex;
                align-items: center;
                &:first-child{
                    &:before{
                        display: none;
                    }
                    // span{
                    //     padding-left:36px;
                    //     padding-right:28px;
                    //     width:189px;
                    //     i{
                    //         width:43px;height:50px;
                    //         border-radius: 0;
                    //     }
                    // }
                }
                &:before{
                    content:"";
                    position: absolute;left:0;top:50%;
                    width:1PX;height:78px;
                    background-color:#c7c7c7;
                    transform:translateY(-50%);
                }
                span{
                    box-sizing: border-box;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding-left:30px;
                    padding-right:28px;
                    // width:265px;
                    width:250px;
                    i{
                        width:50px;height:50px;
                        border-radius:50%;
                    }
                }
            }
        }
    }
    </style>
    ```
1. 父组件
    1. 引用
        ```js
        import Navigator from "../../components/day5/navigate";
        components:{
            // 导航
            Navigator,
        }
        ```
    1. 使用
        ```html
        <Navigator ref="navigate">
            <slot>
                <li @click="goTop(1)">
                    <span>
                        <i class="icon_file"></i>
                        课程导学
                    </span>
                </li>
                <li @click="goTop(2)">
                    <span>
                        <i class="icon_parent-child_learn"></i>
                        亲子共学
                    </span>
                </li>
                <li @click="goTop(3)">
                    <span>
                        <i class="icon_parent-child_read"></i>
                        学习打卡
                    </span>
                </li>
            </slot>
        </Navigator>
        ```
        ```js
        // 组件内的路由守卫-路由离开时触发
        // 替代destory生命周期
        beforeRouteLeave(to, from, next){
            // 页面要离开时，通知navigator组件，卸载scroll事件
            this.$refs.navigate.unbind();
            next();
        },
        ```