--ajaxä¸­æ–­è¯·æ±‚ - jqueryä¸­æ–­ajaxï¼ˆå–æ¶ˆ/abortï¼‰
    //å¦‚æœä¸€ä¸ªajaxè¯·æ±‚è¿‡é•¿ï¼Œä½ å¯èƒ½ä¼šæœ‰å–æ¶ˆä¹‹å‰å‘èµ·çš„ä¸€æ¬¡è¯·æ±‚çš„éœ€è¦
    var r=true,nextClick=false;
    if(nextClick){
        nextClick=false
        if(r&&r.readystate!=4){
            r.abort();
        }
    }
    r=ajax({
        url: 'update.json',
        complete:function(){r=null;},//è¯·æ±‚æˆåŠŸåï¼ŒæŠŠajaxè¿”å›å€¼è®¾ä¸ºNull
        data: $("#form").serializeObject(),
        callback: function (result) {

        }
    });
    nextClick=true;
--å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œæ˜¾ç¤ºé»˜è®¤å›¾ç‰‡
    js:
        $('img').each(function(){
            this.onerror=function(){
                console.log(this)
                $(this).hide().after('<div class="imgDiv"></div>');
                this.onerror=null;
            }
        })
    css:
        .right_car li .imgDiv{
            width: 120px; height: 93px;background: url(../img/logo.jpg) center center no-repeat; background-size: 50% auto;
            display:inline-block; *zoom:1; *display: inline;vertical-align: middle;
            -ms-behavior: url(css/backgroundsize.min.htc);behavior: url(css/backgroundsize.min.htc);
        }
--å®šä½æ‰ç‚¹-å°å›¾æ ‡ä¾æ¬¡å±•ç¤º(å…¬å…ƒåˆ›è¯‘-å‘å±•å†ç¨‹)
    function recursionAnimate(element){
        setStyle(0);
        function setStyle(index){
            var position=element.eq(index).position();
            if(index==element.length-1){
                return;
            }
            element.eq(index).css({top:position.top-80}).animate({opacity:1,top:position.top},{ duration: 200, complete: function() {
                setStyle(++index);
            }});
        }
    }
--cookieè®°å½•æ»šåŠ¨ä½ç½®ï¼Œè§£å†³å›é€€æˆ–é“¾æ¥è¿”å›é¡µé¢æ—¶ï¼Œåˆ°è¾¾æŒ‡å®šä½ç½®(ç”³åšåˆ—è¡¨é¡µ)
    æ¡ä»¶ï¼šajaxæ¸²æŸ“åˆ—è¡¨æ—¶éœ€è¦æ­¤æ–¹æ³•
    æ€è·¯ï¼š
        1.ajaxæ¸²æŸ“ä¹‹åå†æ ¹æ®cookieè·³è½¬é¡µé¢
        2.isScrollæ˜¯ä¸ºäº†é¦–æ¬¡æ‰§è¡Œrenderä¸æ‰§è¡Œscroll
        3.æ»šåŠ¨é¡µé¢è®°å½•cookie
    render(function(){
        var cookie=getCookie('scrollTop');
        if(cookie){
            $('body,html').scrollTop(cookie);
        }
    });
    var isScroll=false;
    $(window).on('scroll', function () {
        if(!isScroll){
            isScroll=true;
            return;
        }
        setCookie('scrollTop',top,1)
    })
--.è¡¨æ ¼å¤´å›ºå®š-transform
    //tableç»‘å®šæ»šåŠ¨äº‹ä»¶ï¼Œæ»šåŠ¨æ—¶theadå§‹ç»ˆå±…äºé¡¶éƒ¨
    $('.table').on('scroll', function () {
        $(this).children('thead').css('transform','translateY('+this.scrollTop+'px)');
    })
    //æ¥æº-http://blog.csdn.net/weixiangzhe/article/details/59108514
--.æŸ¥æ‰¾addEventListenerç»‘å®šäº‹ä»¶é˜Ÿåˆ—
    è§£å†³å›¢é˜Ÿå†…ï¼Œå¤šä¸ªäººå¾€ä¸€ä¸ªå…ƒç´ ä¸Šç»‘ä¸€æ ·çš„äº‹ä»¶ï¼Œäº’ç›¸å½±å“
    åˆ©ç”¨proxyä»£ç†çš„æ–¹å¼ï¼Œç»™ç»‘å®šäº‹ä»¶åŸºç¡€ä¸Šåšä¸€äº›é¢å¤–çš„äº‹æƒ…ï¼Œè¿˜æœ‰ä¸€ç§æ€è·¯æ˜¯aopåˆ‡é¢ç¼–ç¨‹(afterã€befor)
    /**
     * @fileoverview æŸ¥æ‰¾addEventListenerç»‘å®šäº‹ä»¶é˜Ÿåˆ—
     * @author yuanzhijia@yidengxuetang.com
     * @date 2017/10/15
     */
    ((w)=>{
        w.listenerList = new Set();//setæœ‰ä¸€ä¸ªä½œç”¨æ˜¯å»é‡
        const handler = {//è·æ‰§è¡Œçš„addEventListener
            apply: (target, thisBinding, args) =>{//targetæ˜¯ä»£ç†çš„è°;this;å‚æ•°
                listenerList.add(args[0]);//å› ä¸ºSetæœ‰å»é‡çš„ç‰¹ç‚¹ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥addæ·»åŠ ï¼Œæœ‰é‡å¤çš„å°±å»äº†
                //Reflect.apply(_cache,w,args);//åå°„-wæ˜¯this
                //éœ€è¦è¿”å›å‚æ•°å¯æ‰“å¼€
                //return args[0];
            }
        };
        const _cache = w.addEventListener;
        //ä»£ç†ï¼Œèµ°çš„addEventListeneræ˜¯ä»£ç†çš„æ–¹æ³•ï¼Œå› ä¸ºaddEventListeneræ˜¯å¼•ç”¨ç±»å‹ï¼Œå¦‚æœç›´æ¥åœ¨addEventListenerä¸Šå†™æ–¹æ³•ï¼Œé‚£å°±å¾ªç¯å¼•ç”¨äº†
        w.addEventListener = new Proxy((event,fn)=>{
            Reflect.apply(_cache,w,arguments);
        }, handler);//å‚æ•°1.å›è°ƒ;å‚æ•°2.è¦æˆªè·æ‰§è¡Œçš„addEventListenerçš„äº‹ä»¶
    })(window);

    //ğŸ“’å…·ä½“ä¸šåŠ¡æ— éœ€Care
    //window.addEventListener('resize',function(){console.log(1111);});
    //window.addEventListener('a',function(){});
    //for(const val of listenerList){
    //âœï¸æ‰“å°æ‰€æœ‰addEventListeneräº‹ä»¶é˜Ÿåˆ—
    //    console.log(val);
    //}
--.Ajaxè¯·æ±‚é»˜è®¤çš„éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œå¦‚æœæƒ³åŒæ­¥ asyncè®¾ç½®ä¸ºfalse,ç„¶å
    var html = $.ajax({
      url: "some.php",
      async: false
    }).responseText; 

    æˆ–è€…åœ¨å…¨å±€è®¾ç½®Ajaxå±æ€§
    $.ajaxSetup({
      async: false
      });
    å†ç”¨postï¼Œgetå°±æ˜¯åŒæ­¥çš„äº†
--.ä¼ é€’å¤šç»„å‚æ•°(dataä¼ é€’åˆ©ç”¨ä¸Šé¢çš„file_postæ–¹æ³•):
    var data=new FormData();//ä¼ é€’å¤šç»„æ•°ç»„ç»™åç«¯ï¼Œåç«¯è¦æ”¯æŒæ¥å—å­—ç¬¦ä¸²æ•°ç»„
    $('input['type=checkbox']').each(function(){
        data.append('campusId',$(this).attr('data-campusId'))
        data.append('detailId',$(this).attr('data-detailId'))
    })
--.è°ƒç”¨cookie:æ¥æº-https://my.oschina.net/crazymus/blog/425650
    //è®¾ç½®cookieï¼Œæœ‰æ•ˆæœŸä¸º365å¤©
    setCookie('username','123',365);
    //å–å›ï¼Œè‹¥cookieå¤±æ•ˆï¼Œå°†è¿”å›ç©º
    getCookie('username');
    //è®¾ç½®cookie
    function setCookie(c_name,value,expiredays)
    {
        var exdate=new Date()
        exdate.setDate(exdate.getDate()+expiredays)
        document.cookie=c_name+ "=" +escape(value)+
        ((expiredays==null) ? "" : ";expires="+exdate.toGMTString())
    }
 
    //å–å›cookie
    function getCookie(c_name)
    {
        if (document.cookie.length>0)
        {
            c_start=document.cookie.indexOf(c_name + "=")
        if (c_start!=-1)
        { 
            c_start=c_start + c_name.length+1 
            c_end=document.cookie.indexOf(";",c_start)
            if (c_end==-1) c_end=document.cookie.length
            return unescape(document.cookie.substring(c_start,c_end))
            } 
        }
        return ""
    }    
--.åŠ è½½XML
    loadXML = function(xmlString){
            var xmlDoc=null;
            //åˆ¤æ–­æµè§ˆå™¨çš„ç±»å‹
            //æ”¯æŒIEæµè§ˆå™¨ 
            if(!window.DOMParser && window.ActiveXObject){   //window.DOMParser åˆ¤æ–­æ˜¯å¦æ˜¯éieæµè§ˆå™¨
                var xmlDomVersions = ['MSXML.2.DOMDocument.6.0','MSXML.2.DOMDocument.3.0','Microsoft.XMLDOM'];
                for(var i=0;i<xmlDomVersions.length;i++){
                    try{
                        xmlDoc = new ActiveXObject(xmlDomVersions[i]);
                        xmlDoc.async = false;
                        xmlDoc.loadXML(xmlString); //loadXMLæ–¹æ³•è½½å…¥xmlå­—ç¬¦ä¸²
                        break;
                    }catch(e){
                    }
                }
            }
            //æ”¯æŒMozillaæµè§ˆå™¨
            else if(window.DOMParser && document.implementation && document.implementation.createDocument){
                try{
                    /* DOMParser å¯¹è±¡è§£æ XML æ–‡æœ¬å¹¶è¿”å›ä¸€ä¸ª XML Document å¯¹è±¡ã€‚
                     * è¦ä½¿ç”¨ DOMParserï¼Œä½¿ç”¨ä¸å¸¦å‚æ•°çš„æ„é€ å‡½æ•°æ¥å®ä¾‹åŒ–å®ƒï¼Œç„¶åè°ƒç”¨å…¶ parseFromString() æ–¹æ³•
                     * parseFromString(text, contentType) å‚æ•°text:è¦è§£æçš„ XML æ ‡è®° å‚æ•°contentTypeæ–‡æœ¬çš„å†…å®¹ç±»å‹
                     * å¯èƒ½æ˜¯ "text/xml" ã€"application/xml" æˆ– "application/xhtml+xml" ä¸­çš„ä¸€ä¸ªã€‚æ³¨æ„ï¼Œä¸æ”¯æŒ "text/html"ã€‚
                     */
                    domParser = new  DOMParser();
                    xmlDoc = domParser.parseFromString(xmlString, 'text/xml');
                }catch(e){
                }
            }
            else{
                return null;
            }

            return xmlDoc;
    }
--.åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨å€¼
    intNum.contains(arr)
    Array.prototype.contains = function ( needle ) {
      for (i in this) {
        if (this[i] == needle) return true;
      }
      return false;
    }
--.PCé¡µé¢è‡ªé€‚åº”æ‰‹æœº-æ€è·¯æ˜¯ç»™bodyåŠ ä¸€ä¸ªå›ºå®šçš„å¯ä»¥æŠŠå†…å®¹å®Œå…¨å±•ç¤ºçš„å®½åº¦ï¼Œè¿™æ ·åˆ©ç”¨æµè§ˆå™¨æœ‰ç­‰æ¯”ä¾‹ç¼©æ”¾é¡µé¢çš„ç‰¹æ€§
    var width='1300';
    if($(document.body).width()<1180){
        $('body').css("width",width);
        // $(".phoneWidth").css("width",width);
    }
--.HTML5 å®ç°æ‰‹æœºæ‹ç…§ä¸Šä¼ 
    //å¼•ç”¨ï¼šhttps://my.oschina.net/zyxchuxin/blog/700381
    //ä¸Šä¼ å›¾ç‰‡æœ‰åŸç”Ÿçš„æ–¹æ³•<input type="file" accept="image/*">ï¼Œå¦‚æœåªæƒ³è¦æ‹ç…§ä¸Šä¼ ï¼Œä¸å¸Œæœ›ç”¨æˆ·é€‰æ‹©å›¾ç‰‡ä¸Šä¼ ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ captureå±æ€§ï¼Œè¯¥å±æ€§å€¼æœ‰camcorder/microphone/camera...ï¼Œæ­¤å¤„é€‰æ‹©cameraã€‚PSï¼šè¯¥å±æ€§å­˜åœ¨æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜ï¼Œä¸æ˜¯æ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒã€‚
    HTML:<input type="file" accept="image/*" capture="camera" >
    è°ƒç”¨ï¼š
    if(typeof FileReader == 'undefined'){
        $('#xdaTanFileImg').setAttribute("disabled","disabled");  
    }
    $('#xdaTanFileImg').on('change',function(){
        var reader = new FileReader();
        reader.readAsDataURL(this.files[0]);
        reader.onload = function (e) {
            //è°ƒç”¨å›¾ç‰‡å‹ç¼©æ–¹æ³•ï¼šcompress();
            var fileSize = (this.files[0].size/1024/1024).toFixed(2);
            // console.log(this.files[0]);
            // console.log(this.files[0].size);
            // console.log(fileSize);
            // console.log(this.result)
            compress(this.result,fileSize,function(dataUrl){
                var data = new FormData();
                data.append('uploadFile', dataUrl);
                file_post('/img/userphoto/uploadImg.do',data,'',function(data){
                  data=JSON.parse(data);
                  data=JSON.parse(data);
                  imgUrl=data.url;
                  saveImage(imgUrl,function(){
                    // $('#photoUrl').attr('src',imgUrl)
                    // $('#photoUrl').css('background-image','url("'+imgUrl+'")')
                    imgCenter($('#photoUrl'),dataUrl)
                  })
                });
            })
        };
    })
    å°è£…ï¼šfunction compress(res,fileSize,callback) { //resä»£è¡¨ä¸Šä¼ çš„å›¾ç‰‡ï¼ŒfileSizeå¤§å°å›¾ç‰‡çš„å¤§å°
        var img = new Image(),
            maxW = 640; //è®¾ç½®æœ€å¤§å®½åº¦

        img.onload = function () {
            //å¯¹ä¸Šä¼ çš„å›¾ç‰‡è¿›è¡Œå‹ç¼©ï¼Œéœ€è¦å€ŸåŠ©äºcanvas API
            var cvs = document.createElement( 'canvas'),
                ctx = cvs.getContext( '2d');
            //è®¾ç½®å‹ç¼©åçš„æœ€å¤§å®½åº¦ or é«˜åº¦
            if(img.width > maxW) {
                img.height *= maxW / img.width;
                img.width = maxW;
            }

            cvs.width = img.width;
            cvs.height = img.height;

            ctx.clearRect(0, 0, cvs.width, cvs.height);
            ctx.drawImage(img, 0, 0, img.width, img.height);

            var compressRate = getCompressRate(1,fileSize);

            var dataUrl = cvs.toDataURL( 'image/jpeg', compressRate);//å°†å›¾ç‰‡æŒ‰ç…§ä¸€å®šçš„å‹ç¼©æ¯”è¿›è¡Œå‹ç¼©ï¼Œå¾—åˆ°base64ç¼–ç 

            // document.body.appendChild(cvs);
            // console.log(dataUrl);
            callback && callback(dataUrl);
        }

        img.src = res;
    }
    //è®¾ç½®å‹ç¼©æ¯”ä¾‹ï¼Œæ ¹æ®å›¾ç‰‡çš„ä¸åŒsizeå¤§å°ï¼Œè®¾ç½®ä¸åŒçš„å‹ç¼©æ¯”ã€‚
    function getCompressRate(allowMaxSize,fileSize){ //è®¡ç®—å‹ç¼©æ¯”ç‡ï¼Œsizeå•ä½ä¸ºMB
          var compressRate = 1;
          if(fileSize/allowMaxSize > 4){
               compressRate = 0.5;
          } else if(fileSize/allowMaxSize >3){
               compressRate = 0.6;
          } else if(fileSize/allowMaxSize >2){
               compressRate = 0.7;
          } else if(fileSize > allowMaxSize){
               compressRate = 0.8;
          } else{
               compressRate = 0.9;
          }

          alert(fileSize/allowMaxSize,compressRate)
          return compressRate;
    }
--.é¢„åŠ è½½
    //img.onload=img.onerrorï¼šæ˜¯ä¸ºäº†è§£å†³å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶ï¼Œå¯ä»¥ç»§ç»­æ‰§è¡Œè„šæœ¬
    function progressBar(){
        var element='<div id="overlay-bar"><div id="progress"></div><div class="loadLogo"><img src="img/logo.png"/></div><div id="progressNum">0%</div></div>';
        $(document.body).append(element);
        var num=0,arr=$('img');
        arr.each(function(){
            var img=new Image();
            img.onload=img.onerror=function(){
                try{
                    num++;
                    var scale=Math.floor((num/arr.length)*100);
                    $('#progress').width(scale+'%');
                    $('#progressNum').text(scale+'%')
                    if(scale==100){
                        $('#overlay-bar').animate({'opacity':0},{ duration: 300, queue: false, complete: function() {
                            $(this).hide();
                            $('#other-wrap').fadeIn();
                        }
                        });
                    }
                }catch(e){
                    console.log(e);
                }
            }
            img.src='http://shenbo.igalaxy.com.cn/'+$(this).attr('src');
        })
    }
    //imgå¯¹è±¡å°ä¾‹å­-è®¾ç½®ç´¢å¼•å±æ€§ã€è¯»å–å±æ€§
    li.each(function(){
        var index=$(this).index();//éå†liç´¢å¼•å¹¶èµ‹ç»™imgå¯¹è±¡ä¸Š
        var imgElement=$(this).children('img');
        var img=new Image();
        img.onload=function(){
            img.onload=null;//è§£å†³gifå›¾å¤šæ¬¡å‡ºå‘onloadçš„é—®é¢˜
            var index=this.getAttribute('data-index');
            var currentLi=li.eq(index);
            var currentImg=currentLi.children('img');
            currentLi.css({'left':'50%','margin-left':-(currentImg.width()/2),'top':'50%','margin-top':-(currentImg.height()/2)})
        };
        img.setAttribute('data-index',index);//æ”¾åˆ°img.srcæ˜¯ä¸ºäº†å…¼å®¹IEä½ç‰ˆæœ¬
        img.src=imgElement.attr('src');//æ”¾åˆ°è¿™é‡Œæ˜¯ä¸ºäº†å…¼å®¹ieä½ç‰ˆæœ¬
    })